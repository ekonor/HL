<div class="tao-list section" [hidden]="dataIsLoading">
  <div class="col-md-12 admin-panel">
    <a class="visible-btn"
       title="Добавить анонс"
       (click)="addTournamentAnnouncement()"
       [hasPermission]="['tournamentadministrator']"
       onAuthorizedPermission="show"
       onUnauthorizedPermission="hide">
      <i class="fa fa-plus"></i>
    </a>
    <a class="visible-btn"
       title="Полный список"
       (click)="listTournaments()"
       [hasPermission]="['tournamentadministrator']"
       onAuthorizedPermission="show"
       onUnauthorizedPermission="hide">
      <i class="fa fa-align-justify"></i>
    </a>
  </div>
  <table class="table" *ngIf="content && content.length>0">
    <thead>
    <tr>
      <th>#</th>
      <th colspan="2">Название</th>
      <th>Начало</th>
      <th>Окончание</th>
      <th>
        <p class="icon-wrap">
          <i class="fa fa-map-marker"></i>
        </p>
      </th>
      <th colspan="2" >
        <p class="icon-wrap">
          <i class="fa fa-street-view"></i>
        </p>
      </th>
      <th>
        <p class="icon-wrap">
          <i class="fa fa-users"></i>
        </p>
      </th>
      <th>
        <p class="icon-wrap">
          <i class="fa fa-male"></i>/<i class="fa fa-child"></i>
        </p>
      </th>
      <th>
        <p class="icon-wrap">
          <i class="fa fa-male"></i>/<i class="fa fa-female"></i>
        </p>
      </th>
      <th>
        <p class="icon-wrap">
          <i class="fa fa-bell"></i>
        </p>
      </th>
      <th>
        <p class="icon-wrap">
        <i class="fa fa-rouble"></i>
        </p>
      </th>
      <th>
      </th>
    </tr>
    </thead>
    <tbody *ngIf="content">
    <tr *ngFor="let tournamentAnnouncement of content" [class]="getStateClass(tournamentAnnouncement)" [title]="getStateTitle(tournamentAnnouncement)">
      <th scope="row">{{content?.indexOf(tournamentAnnouncement)+1}}</th>
      <td>
        <div class="logo-img-wrapper" >
          <div class="logo-img-bg-wrapper" >
            <img class="logo-img-bg"
                 [src]="getTournamentAnnouncementLogo(tournamentAnnouncement)"
                 alt="{{tournamentAnnouncement.name}}"
                 onerror = "this.style.display = 'none'">
          </div>
          <a [routerLink]="['/tournament-announcement',tournamentAnnouncement.id]" routerLinkActive="active">
            <img class="logo-img-main"
                 [src]="getTournamentAnnouncementLogo(tournamentAnnouncement)"
                 alt="{{tournamentAnnouncement.name}}"
                 onerror = "this.style.display = 'none'" >
          </a>
        </div>
      </td>
      <td>
        <a *ngIf="tournamentAnnouncement" [routerLink]="['/tournament-announcement',tournamentAnnouncement.id]" routerLinkActive="active">
          {{tournamentAnnouncement.name}}
        </a>
      </td>
      <td>{{tournamentAnnouncement.startDate | date :  "dd.MM.y"}}</td>
      <td>{{tournamentAnnouncement.endDate | date :  "dd.MM.y"}}</td>
      <td>{{tournamentAnnouncement.cityName ? tournamentAnnouncement.cityName: ''}}</td>
      <td>
        <div class="logo-img-wrapper" >
          <div class="logo-img-bg-wrapper" >
            <img class="logo-img-bg"
                 *ngIf="tournamentAnnouncement && tournamentAnnouncement.arena" [src]="getArenaLogo(tournamentAnnouncement.arena)"
                 alt="{{tournamentAnnouncement.arena.name}}"
                 onerror = "this.style.display = 'none'">
          </div>
          <a *ngIf="tournamentAnnouncement && tournamentAnnouncement.arena" [routerLink]="['/arena',tournamentAnnouncement.arena.id]" routerLinkActive="active">
            <img class="logo-img-main"
                 [src]="getArenaLogo(tournamentAnnouncement.arena)"
                 alt="{{tournamentAnnouncement.arena.name}}"
                 onerror = "this.style.display = 'none'" >
          </a>
        </div>
      </td>
      <td>
        <a *ngIf="tournamentAnnouncement && tournamentAnnouncement.arena" [routerLink]="['/arena',tournamentAnnouncement.arena.id]" routerLinkActive="active">
          {{tournamentAnnouncement.arena.name}}
        </a>
      </td>
      <td>{{getRequiredResponseCount(tournamentAnnouncement)}}</td>
      <td>
        <p class="icon-wrap">
          <i [class]="getAgeGroupIconClass(tournamentAnnouncement)"></i>
        </p>
      </td>
      <td>
        <p class="icon-wrap">
          <i [class]="getGenderIconClass(tournamentAnnouncement)"></i>
        </p>
      </td>
      <td>
        {{tournamentAnnouncement.endRegistrationDate? (tournamentAnnouncement.endRegistrationDate | date :  "dd.MM.y") : getNoData()}}
      </td>
      <td>
        {{getCostText(tournamentAnnouncement)}}
      </td>
      <td class="admin-panel">
        <a *ngIf="tournamentAnnouncement.state == 'Draft'" class="visible-btn"
           title="Редактировать анонс"
           (click)="editTournamentAnnouncement(tournamentAnnouncement)"
           [hasPermission]="['tournamentadministrator']"
           onAuthorizedPermission="show"
           onUnauthorizedPermission="hide">
          <i [class]="getEditIconClass()"></i>
        </a>
        <a *ngIf="tournamentAnnouncement.state == 'Draft'" class="visible-btn"
           title="Отправить на модерацию"
           (click)="sendOnModeration(tournamentAnnouncement)"
           [hasPermission]="['tournamentadministrator']"
           onAuthorizedPermission="show"
           onUnauthorizedPermission="hide">
          <i [class]="getSendOnModerationIconClass()"></i>
        </a>
        <a *ngIf="tournamentAnnouncement.state == 'Draft' || tournamentAnnouncement.state == 'RejectedByModerator'" class="visible-btn"
           title="Удалить анонс"
           (click)="deleteTournamentAnnouncement(tournamentAnnouncement)"
           [hasPermission]="['tournamentadministrator']"
           onAuthorizedPermission="show"
           onUnauthorizedPermission="hide">
          <i [class]="getDeleteIconClass()"></i>
        </a>
        <a *ngIf="tournamentAnnouncement.state == 'ApprovedByModerator'" class="visible-btn"
           title="Завершить прием заявок"
           (click)="closeTournamentAnnouncement(tournamentAnnouncement)"
           [hasPermission]="['tournamentadministrator']"
           onAuthorizedPermission="show"
           onUnauthorizedPermission="hide">
          <i [class]="getCloseIconClass()"></i>
        </a>
        <a *ngIf="tournamentAnnouncement.state == 'ApprovedByModerator'" class="visible-btn"
           title="Отменить турнир"
           (click)="cancelTournamentAnnouncement(tournamentAnnouncement)"
           [hasPermission]="['tournamentadministrator']"
           onAuthorizedPermission="show"
           onUnauthorizedPermission="hide">
          <i [class]="getCancelIconClass()"></i>
        </a>
      </td>
    </tr>
    </tbody>
  </table>
</div>
    <!--div class="col-lg-6 col-sm-6 blog-item" *ngFor="let tournamentAnnouncement of content"-->
      <!--div class="item h-100">
        <div class="item-img-wrapper" >
          <div class="item-img-bg-wrapper" >
            <img class="item-img-bg"
                 [src]="getTournamentAnnouncementLogo(tournamentAnnouncement)"
                 alt=""
                 onerror = "this.style.display = 'none'">
          </div>
          <a [routerLink]="['/tournament',tournamentAnnouncement.id]" routerLinkActive="active">
            <img class="item-img-main"
                 [src]="getTournamentAnnouncementLogo(tournamentAnnouncement)"
                 alt=""
                 onerror = "this.style.display = 'none'" >
          </a>
        </div>
        <div class="item-body">
          <div class="item-title-main">
            <p>
              {{tournamentAnnouncement.cityName ? tournamentAnnouncement.cityName+', ': ''}}
              {{tournamentAnnouncement.startDate | date :  "dd.MM.y"}}
              &nbsp;&mdash;&nbsp;
              {{tournamentAnnouncement.endDate | date :  "dd.MM.y"}}
            </p>
          </div>
          <h5 class="item-title admin-panel">
            <a class="title-text" (click)="viewTournamentAnnouncement(tournamentAnnouncement)" alt="Подробнее...">
              {{tournamentAnnouncement.name}}
            </a>
          </h5>
          <span class="item-text">
              <div class="row block-with-logo">
                <div class="col-md-6">
                  <p>
                    Арена:
                  </p>
                  <p>
                    <a [routerLink]="['/arena',tournamentAnnouncement.arena.id]" routerLinkActive="active">
                      {{tournamentAnnouncement.arena.name}}
                    </a>
                  </p>
                  <div class="logo-img-wrapper" >
                    <div class="logo-img-bg-wrapper" >
                    <img class="logo-img-bg"
                         [src]="getArenaLogo(tournamentAnnouncement.arena)"
                         alt="{{tournamentAnnouncement.arena.name}}"
                         onerror = "this.style.display = 'none'">
                    </div>
                    <a [routerLink]="['/arena',tournamentAnnouncement.arena.id]" routerLinkActive="active">
                    <img class="logo-img-main"
                         [src]="getArenaLogo(tournamentAnnouncement.arena)"
                         alt="{{tournamentAnnouncement.arena.name}}"
                         onerror = "this.style.display = 'none'" >
                    </a>
                  </div>
                </div>

                <div class="col-md-6">
                  <p>
                    Организатор:
                  </p>
                  <p>
                    <a [routerLink]="['/organization',tournamentAnnouncement.organization.id]" routerLinkActive="active">
                      {{tournamentAnnouncement.organization.name}}
                    </a>
                  </p>
                  <div class="logo-img-wrapper" >
                    <div class="logo-img-bg-wrapper" >
                    <img class="logo-img-bg"
                         [src]="getOrganizationLogo(tournamentAnnouncement.organization)"
                         alt="{{tournamentAnnouncement.organization.name}}"
                         onerror = "this.style.display = 'none'">
                    </div>
                    <a [routerLink]="['/organization',tournamentAnnouncement.organization.id]" routerLinkActive="active">
                    <img class="logo-img-main"
                         [src]="getOrganizationLogo(tournamentAnnouncement)"
                         alt="{{tournamentAnnouncement.organization.name}}"
                         onerror = "this.style.display = 'none'" >
                    </a>
                  </div>
                </div>

              </div>

              <p class="icon-wrap">
                <i class="fa fa-users"></i>
                Макс. количество участников:
                {{getRequiredResponseCount(tournamentAnnouncement)}}
              </p>
              <p class="icon-wrap">
                <i [class]="getAgeGroupIconClass(tournamentAnnouncement)"></i>
                Возрастная группа
              </p>
              <p class="icon-wrap"
                 *ngIf="tournamentAnnouncement.ageGroup == 'Подростки'">
                <i class="material-icons">&#xe7fb;</i>
                Возраст:
                {{tournamentAnnouncement.minAge}}-{{tournamentAnnouncement.maxAge}}
              </p>
              <p class="icon-wrap">
                <i [class]="getGenderIconClass(tournamentAnnouncement)"></i>
                Пол участников
              </p>
              <p class="icon-wrap" *ngIf="tournamentAnnouncement.state==='ApprovedByModerator'">
                <i class="fa fa-bell"></i>
                Окончание регистрации:
                {{tournamentAnnouncement.endRegistrationDate? (tournamentAnnouncement.endRegistrationDate | date :  "dd.MM.y") : getNoData()}}
              </p>
               <p class="icon-wrap" *ngIf="tournamentAnnouncement.state==='Finished'">
                <i class="fa fa-bell"></i>
                Статус: завершен
              </p>
              <span *ngIf="tournamentAnnouncement.isCommercial && tournamentAnnouncement.isCommercial == true">
                <p class="icon-wrap">
                  <i class="fa fa-rouble"></i>
                  Цена участия: {{getCostText(tournamentAnnouncement)}}
                </p>
              </span>
          </span>

          <span class="bottom-btn">
            <button (click)="viewTournamentAnnouncement(tournamentAnnouncement)"
                    class="btn btn-deep-orange waves-effect waves-light">
              Подробнее...
            </button>
          </span>
        </div>
      </div-->
    <!--/div-->

