<loader [hidden]="!dataIsLoading"></loader>
<div *ngIf="school" class="school-edit row">
<div class="col-md-6 col-md-offset-3">
  <h2>Редактирование школы</h2>
  <form (ngSubmit)="editSchool(school)" #myForm="ngForm">
     <div class="form-group">
      <label for="schoolname">Сокращенное название школы</label>
      <input type="text" class="form-control" name="schoolname" [(ngModel)]="school.name" (ngModelChange)="school.name = $event" #arenaname="ngModel" id="schoolname" required="required"/>
    </div>
    <div class="form-group">
      <label for="fullName">Полное название школы</label>
      <input type="text" class="form-control" name="fullName" [(ngModel)]="school.fullName" (ngModelChange)="school.fullName = $event" #fullName="ngModel" id="fullName"/>
    </div>
    <div class="form-group required">
      <app-city-filter [city]="city" [isRequired]="true" (onChanged)="setCity($event)"></app-city-filter>
    </div>
    <div class="form-group required">
      <arena-select *ngIf="city" [cityId]="city.id" [arena]="arena" [isRequired]="true" (onChanged)="setArena($event)"></arena-select>
    </div>
    <div class="form-group">
      <label for="address">Адрес</label>
      <input type="text" class="form-control" name="address" [(ngModel)]="school.address" (ngModelChange)="school.address = $event" #address="ngModel" id="address"/>
    </div>
    <div class="form-group">
      <label for="phone">Телефон</label>
      <input type="text" class="form-control" name="phone" [(ngModel)]="school.phone" (ngModelChange)="school.phone = $event" #contacts="ngModel" id="phone" />
    </div>
    <div class="form-group">
      <label for="email">E-mail</label>
      <input type="email" class="form-control" name="email" [(ngModel)]="school.email" (ngModelChange)="school.email = $event" #email="ngModel" ngModel id="email"/>
    </div>
    <div class="form-group">
      <label for="webSite">Сайт</label>
      <input type="text" class="form-control" name="webSite" [(ngModel)]="school.webSite" (ngModelChange)="school.webSite = $event" #webSite="ngModel" id="webSite"/>
     </div>
    <div class="form-group">
      <label for="about">Описание</label>
      <app-ngx-editor [placeholder]="'Описание школы'" [height]="200" class="form-control" name="about" [(ngModel)]="school.about" (ngModelChange)="school.about = $event" #about="ngModel" id="about"></app-ngx-editor>
     </div>
    <div class="form-group">
      <input [(ngModel)]="deleteFlag" (change)="setDeleteFlag()" type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked /><span class="checkbox-title">Удалить?</span>
    </div>
    <div class="form-group">
      <button class="btn btn-primary" type="submit" [disabled]="dataIsLoading || myForm.invalid">Применить</button>
      <button class="btn btn-danger" (click)="deleteSchool()" [disabled]="dataIsLoading || !deleteFlag">Удалить</button>
      <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
    </div>
  </form>
</div>

<div class="col-md-6 col-md-offset-3">
  <h2>Редактирование изображений</h2>
  <img class="img-fluid rounded" [src]="getSchoolLogo(arena)" alt="">
  <a class="btn-floating deep-orange waves-light waves-effect" title="Редактировать изображение" (click)="editLogo()"><i class="fa fa-pencil"></i></a>
</div>
</div>
