<loader [hidden]="!dataIsLoading"></loader>
<div class="tournament-create col-md-offset-12 col-md-12" *ngIf="tournament">
  <h2>Конструктор турнира</h2>
  <div>Конструктор хоккейных турниров поможет Вам внести данные о прошедшем турнире в базу данных портала. Просто следуйте инструкциям на сайте. Более подробную информацию и видео-инструкции Вы найдете в разделе FAQ.</div>
  <!--form #myForm="ngForm"-->
      <div class="steps-row-2 setup-panel-2 d-flex justify-content-between">
        <div class="steps">
          <span class="btn {{ ( step == 1 ) ? 'btn-primary' : 'grey' }}" (click)="changeStep(1)" data-placement="top" title="Общие данные">Общие данные</span>
        </div>
        <div class="steps">
          <span class="btn {{ ( step == 2 ) ? 'btn-primary' : 'grey' }}" (click)="changeStep(2)" data-placement="top" title="Арены">Арены</span>
        </div>
        <div class="steps">
          <span class="btn {{ ( step == 3 ) ? 'btn-primary' : 'grey' }}" (click)="changeStep(3)" data-placement="top" title="Команды">Команды</span>
        </div>
        <div class="steps">
          <span class="btn {{ ( step == 4 ) ? 'btn-primary' : 'grey' }}" (click)="changeStep(4)" data-placement="top" title="Судьи">Судьи</span>
        </div>
        <div class="steps">
          <span class="btn {{ ( step == 5 ) ? 'btn-primary' : 'grey' }}" (click)="changeStep(5)" data-placement="top" title="Расписание">Расписание</span>
        </div>
        <div class="steps">
          <span class="btn {{ ( step == 6 ) ? 'btn-primary' : 'grey' }}" (click)="changeStep(6)" data-placement="top" title="Завершение">Завершение</span>
        </div>
      </div>
      <div id="step-1" *ngIf="step == 1">
        ШАГ 1. ОБЩИЕ ХАРАКТЕРИСТИКИ ТУРНИРА
        <div class="form-group required">
          <label for="tname">1. Название турнира</label>
          <input type="text" class="form-control" name="tname" [(ngModel)]="tournament.name" (ngModelChange)="tournament.name = $event" #taname="ngModel" id="taname" title="Введите название турнира" required="required"/>
        </div>
        <label for="season">Сезон</label>
        <select class="form-group" [(ngModel)]="tournament.season" name="season" class="form-control" #season="ngModel" id="season" (ngModelChange)="tournament.season = $event">
          <option *ngFor="let season of seasonTypes" [ngValue]="season.value" >{{season.name}}</option>
        </select>
        <div class="form-group">
          <label>2.Даты проведения</label>
          <app-datepicker [dt]="tournament.startDate" (onChanged)="onChangedStartDt($event); ( oneDay === true ) ? onChangedEndDt($event) : '';"></app-datepicker>
          <app-datepicker [dt]="tournament.endDate" (onChanged)="onChangedEndDt($event)" class="{{ ( oneDay === true ) ? 'disabled' : '' }}"></app-datepicker>
          <input type="checkbox" name="oneDay" [(ngModel)]="oneDay">Турнир проходит в один день
        </div>
        <label for="gender">Пол участников</label>
        <select class="form-group" [(ngModel)]="tournament.gender" name="gender" class="form-control" #gender="ngModel" id="gender" (ngModelChange)="tournament.gender = $event">
          <option *ngFor="let genderType of genderTypes"  [ngValue]="genderType.value" >{{genderType.name}}</option>
        </select>
        <label for="age">Возрастная группа/Год рождения</label>
        <select class="form-group" [(ngModel)]="tournament.ageGroup" name="age" class="form-control" #age="ngModel" id="age" (ngModelChange)="tournament.ageGroup = $event">
          <option *ngFor="let age of ageTypes" [ngValue]="age.value" >{{age.name}}</option>
        </select>
        <label for="division">Дивизион/группы/этапы</label>
        <select class="form-group" [(ngModel)]="tournament.division" name="division" class="form-control" #division="ngModel" id="division" (ngModelChange)="tournament.division = $event">
          <option *ngFor="let division of divisionTypes" [ngValue]="division.value" >{{division.name}}</option>
        </select>
      </div>
      <div id="step-2" *ngIf="step == 2">
        ШАГ 2. АРЕНЫ
          <div class="row vertical-align">
            <div class="col-md-4 form-group required">
              <arena-select [arena]="arena" [isRequired]="true" [showArenaTitle]="false" (onChanged)="setArena($event)"></arena-select>
            </div>
            <div class="col-md-1 vertical-align">
              <button [hasPermission]="['tournamentadministrator']"
                      class="btn btn-primary waves-light"
                      title="Добавить арену"
                      (click)="addArena(arena)"
                      onAuthorizedPermission="show"
                      onUnauthorizedPermission="hide"
                      [disabled]="dataIsLoading || !arena">
                <i [class]="getAddIconClass()"></i>
              </button>
            </div>
            <div class="col-md-7">
              После выбора арены нажмите + <br/>и арена автоматически добавится в список
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <span>Если Вашей арены/площадки не в списке, необходимо <br/>создать арену самостоятельно ("Создать арену").</span>
            </div>
          </div>
          <div class="row vertical-align">
            <div class="col-md-5 vertical-align">
              <button [hasPermission]="['tournamentadministrator']"
                      class="btn btn-primary waves-light"
                      title="Создать новую арену"
                      (click)="toggledNewArena=true"
                      onAuthorizedPermission="show"
                      onUnauthorizedPermission="hide"
                      [disabled]="dataIsLoading">
                <i [class]="getAddIconClass()"></i>&nbsp;&nbsp;Создать арену
              </button>
            </div>
          </div>
        <form #newarenaForm="ngForm" class="row toggled-form" [hidden]="!toggledNewArena">
            <div class="col-md-2 form-group required">
              <label for="newarenaname">Название арены</label>
              <input type="text" class="form-control" name="newarenaname" [(ngModel)]="newarena.name" (ngModelChange)="newarena.name = $event" #newarenaname="ngModel" id="newarenaname" title="Введите название арены" required="required"/>
            </div>
            <div class="col-md-4 form-group required vertical-align">
              <app-city-filter [city]="newarena.city" [isRequired]="true" (onChanged)="setNewArenaCity($event)"></app-city-filter>
            </div>
            <div class="col-md-6 vertical-align">
              <button [hasPermission]="['tournamentadministrator']"
                      class="btn btn-primary waves-light"
                      title="Добавить новую арену"
                      (click)="createArena()"
                      onAuthorizedPermission="show"
                      onUnauthorizedPermission="hide"
                      [disabled]="dataIsLoading || newarenaForm.invalid || newarena.city == null">
                <i [class]="getAddIconClass()"></i>&nbsp;&nbsp;Добавить
              </button>
            </div>
        </form>
        <div class="row">
          <div class="col-md-6" *ngIf="tournament.arenas.length == 0">
            <br/>
            Список арен пуст.
            <br/>
            <br/>
          </div>
        </div>
        <div class="row">
          <div class="col-md-7">
            <div class="list-table" *ngFor="let arenaItem of tournament.arenas">
              <div class="row" *ngIf="tournament.arenas?.indexOf(arenaItem) == 0">
                <div class="col-md-1"></div>
                <div class="col-md-5 text-center">Название</div>
                <div class="col-md-6">&nbsp;Удалить&nbsp;&nbsp;&nbsp;Вниз&nbsp;&nbsp;&nbsp;Вверх</div>
              </div>
              <div class="row vertical-align">
                <div class="col-md-1">
                  {{tournament.arenas?.indexOf(arenaItem)+1}}.
                </div>
                <div class="col-md-5 table-row-selection" (click)="setSelectionArena(arenaItem)" tabindex="{{tournament.arenas?.indexOf(arenaItem)+1}}">
                  {{arenaItem.name }} {{arenaItem.cityName ? '(' + arenaItem.cityName + ')' : ''}}
                </div>
                <div class="col-md-6">
                  <div class="operations-panel navbar navbar-left pull-left">
                    <button [hasPermission]="['tournamentadministrator']"
                            class="btn btn-danger waves-light"
                            title="Удалить арену из списка"
                            (click)="removeArena(arenaItem)"
                            onAuthorizedPermission="show"
                            onUnauthorizedPermission="hide"
                            [disabled]="dataIsLoading || !arenaItem">
                      <i [class]="getDeleteIconClass()"></i>
                    </button>
                    <button [hasPermission]="['tournamentadministrator']"
                            class="btn btn-primary waves-light"
                            title="Переместить ниже в списке"
                            (click)="moveArenaDown(arenaItem)"
                            onAuthorizedPermission="show"
                            onUnauthorizedPermission="hide"
                            [disabled]="dataIsLoading || !arenaItem || tournament.arenas?.indexOf(arenaItem) == tournament.arenas.length-1 || tournament.arenas.length < 2">
                      <i [class]="getMoveDownIconClass()"></i>
                    </button>
                    <button [hasPermission]="['tournamentadministrator']"
                            class="btn btn-primary waves-light"
                            title="Переместить выше в списке"
                            (click)="moveArenaUp(arenaItem)"
                            onAuthorizedPermission="show"
                            onUnauthorizedPermission="hide"
                            [disabled]="dataIsLoading || !arenaItem || tournament.arenas.length < 2 || tournament.arenas?.indexOf(arenaItem) == 0">
                      <i [class]="getMoveUpIconClass()"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-5">
            <div class="row" *ngIf="activeArena">
              <div class="col-md-12 text-center">
                Информация об арене
              </div>
            </div>
            <div class="row" *ngIf="activeArena">
              <div class="col-md-2">
                  № п/п
              </div>
              <div class="col-md-3">
                  Название арены
              </div>
              <div class="col-md-3">
                  Город
              </div>
              <div class="col-md-4">
                  Адрес
              </div>
            </div>
            <div class="row" *ngIf="activeArena">
              <div class="col-md-2">
                  1
              </div>
              <div class="col-md-3">
                {{activeArena.name}}
              </div>
              <div class="col-md-3">
                {{activeArena.cityName}}
              </div>
              <div class="col-md-4">
                {{activeArena.address}}
              </div>
            </div>
          </div>
        </div>
      </div>
    <div id="step-3" *ngIf="step == 3">
      ШАГ 3. КОМАНДЫ

      <div class="row vertical-align">
        <div class="col-md-4 form-group required">
          <team-select [team]="team" [isRequired]="true" [showTeamTitle]="false" (onChanged)="setTeam($event)"></team-select>
        </div>
        <div class="col-md-1 vertical-align">
          <button [hasPermission]="['tournamentadministrator']"
                  class="btn btn-primary waves-light"
                  title="Добавить команду"
                  (click)="addTeam(team)"
                  onAuthorizedPermission="show"
                  onUnauthorizedPermission="hide"
                  [disabled]="dataIsLoading || !team">
            <i [class]="getAddIconClass()"></i>
          </button>
        </div>
        <div class="col-md-7">
          После выбора команды нажмите + <br/>и команда автоматически добавится в список
        </div>
      </div>
      <!--div class="row">
        <div class="col-md-12">
          <span>Если нужной команды не в списке, необходимо <br/>создать команду самостоятельно ("Создать команду").</span>
        </div>
      </div-->
      <!--div class="row vertical-align">
        <div class="col-md-5 vertical-align">
          <button [hasPermission]="['tournamentadministrator']"
                  class="btn btn-primary waves-light"
                  title="Создать новую команду"
                  (click)="toggledNewTeam=true"
                  onAuthorizedPermission="show"
                  onUnauthorizedPermission="hide"
                  [disabled]="dataIsLoading">
            <i [class]="getAddIconClass()"></i>&nbsp;&nbsp;Создать команду
          </button>
        </div>
      </div-->
      <!--form #newteamForm="ngForm" class="row toggled-form" [hidden]="!toggledNewTeam">
        <div class="col-md-2 form-group required">
          <label for="newteamname">Название команды</label>
          <input type="text" class="form-control" name="newteamname" [(ngModel)]="newteam.name" (ngModelChange)="newteam.name = $event" #newteamname="ngModel" id="newteamname" title="Введите название команды" required="required"/>
        </div>
        <div class="col-md-4 form-group required vertical-align">
          <app-city-filter [city]="newteam.city" [isRequired]="true" (onChanged)="setNewTeamCity($event)"></app-city-filter>
        </div>
        <div class="col-md-6 vertical-align">
          <button [hasPermission]="['tournamentadministrator']"
                  class="btn btn-primary waves-light"
                  title="Добавить новую команду"
                  (click)="createTeam()"
                  onAuthorizedPermission="show"
                  onUnauthorizedPermission="hide"
                  [disabled]="dataIsLoading || newteamForm.invalid || newteam.city == null">
            <i [class]="getAddIconClass()"></i>&nbsp;&nbsp;Добавить
          </button>
        </div>
      </form-->
      <div class="row">
        <div class="col-md-6" *ngIf="tournament.teams.length == 0">
          <br/>
          Список команд пуст.
          <br/>
          <br/>
        </div>
      </div>
      <div class="row">
        <div class="col-md-7">
          <div class="list-table" *ngFor="let teamItem of tournament.teams">
            <div class="row" *ngIf="tournament.teams?.indexOf(teamItem) == 0">
              <div class="col-md-1"></div>
              <div class="col-md-5 text-center">Название</div>
              <div class="col-md-6">&nbsp;Удалить&nbsp;&nbsp;&nbsp;Вниз&nbsp;&nbsp;&nbsp;Вверх</div>
            </div>
            <div class="row vertical-align">
              <div class="col-md-1">
                {{tournament.teams?.indexOf(teamItem)+1}}.
              </div>
              <div class="col-md-5 table-row-selection" (click)="setSelectionTeam(teamItem)" tabindex="{{tournament.teams?.indexOf(teamItem)+1}}">
                {{teamItem.name }} {{teamItem.cityName ? '(' + teamItem.cityName + ')' : ''}}
              </div>
              <div class="col-md-6">
                <div class="operations-panel navbar navbar-left pull-left">
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-danger waves-light"
                          title="Удалить команду из списка"
                          (click)="removeTeam(teamItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem">
                    <i [class]="getDeleteIconClass()"></i>
                  </button>
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-primary waves-light"
                          title="Переместить ниже в списке"
                          (click)="moveTeamDown(teamItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem || tournament.teams?.indexOf(teamItem) == tournament.teams.length-1 || tournament.teams.length < 2">
                    <i [class]="getMoveDownIconClass()"></i>
                  </button>
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-primary waves-light"
                          title="Переместить выше в списке"
                          (click)="moveTeamUp(teamItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem || tournament.teams.length < 2 || tournament.teams?.indexOf(teamItem) == 0">
                    <i [class]="getMoveUpIconClass()"></i>
                  </button>
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-primary waves-light"
                          title="Изменить состав"
                          (click)="changePlayers(teamItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem">
                    <i [class]="getPlayersIconClass()"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-5">
          <div class="row" *ngIf="activeTeam">
            <div class="col-md-12 text-center">
              Проверить список добавленных игроков
            </div>
            <div class="col-md-12 text-center">
              {{activeTeam.name }}{{activeTeam.city? '('+activeTeam.city.name+')': ''}}
            </div>
          </div>
          <div class="row" *ngIf="activeTeam">
            <div class="col-md-1">
              № п/п
            </div>
            <div class="col-md-4">
              ФИО игрока
            </div>
            <div class="col-md-3">
              Номер
            </div>
            <div class="col-md-4">
              Дата рождения
            </div>
          </div>
          <div class="row" *ngFor="let player of activeTeam?.players">
            <div class="col-md-1">
              {{activeTeam.players?.indexOf(player)+1}}
            </div>
            <div class="col-md-4">
              {{player.name}}
            </div>
            <div class="col-md-3">
              {{player.id}}
            </div>
            <div class="col-md-4">
              {{player.birthdate}}
            </div>
          </div>
        </div>
      </div>
    </div>
      <!--div class="row vertical-align">
        <div class="col-md-4 form-group required">
          <team-select [team]="team" [isRequired]="true" [showTeamTitle]="false" (onChanged)="setTeam($event)"></team-select>
        </div>
        <div class="col-md-2 vertical-align">
          <button [hasPermission]="['tournamentadministrator']"
                  class="btn btn-primary waves-light"
                  title="Добавить команду"
                  (click)="addTeam(team)"
                  onAuthorizedPermission="show"
                  onUnauthorizedPermission="hide"
                  [disabled]="dataIsLoading || !team">
            <i [class]="getAddIconClass()"></i>
          </button>
        </div>
      </div-->
      <!--div class="row vertical-align">
        <div class="col-md-5 vertical-align">
          <button [hasPermission]="['tournamentadministrator']"
                  class="btn btn-primary waves-light"
                  title="Создать новую команду"
                  (click)="createTeam()"
                  onAuthorizedPermission="show"
                  onUnauthorizedPermission="hide"
                  [disabled]="dataIsLoading">
            <i [class]="getAddIconClass()"></i>&nbsp;&nbsp;Создать команду
          </button>
        </div>
      </div-->
      <!--div class="row">
        <div class="col-md-12">
          После выбора команды нажмите + <br/>и команды автоматически добавится в список
        </div>
      </div-->
      <!--div class="row">
        <div class="col-md-7">
          <div *ngFor="let teamItem of tournament.teams">
            <div class="row" *ngIf="tournament.teams?.indexOf(teamItem) == 0">
              <div class="col-md-1"></div>
              <div class="col-md-3 text-center">Название</div>
              <div class="col-md-2 text-center">Удалить</div>
              <div class="col-md-2 text-center">Вниз/Вверх</div>
            </div>
            <div class="row vertical-align">
              <div class="col-md-1">
                {{tournament.teams?.indexOf(teamItem)+1}}
              </div>
              <div class="col-md-3">
                {{teamItem.name }} {{teamItem.city ? '('+teamItem.city.name+')' : ''}}
              </div>
              <div class="col-md-6">
                <div class="operations-panel navbar navbar-left pull-left">
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-danger waves-light"
                          title="Удалить команду из списка"
                          (click)="removeTeam(teamItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem">
                    <i [class]="getDeleteIconClass()"></i>
                  </button>
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-primary waves-light"
                          title="Переместить ниже в списке"
                          (click)="moveTeamDown(arenaItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem || tournament.teams?.indexOf(teamItem) == tournament.teams.length-1 || tournament.teams.length < 2">
                    <i [class]="getMoveDownIconClass()"></i>
                  </button>
                  <button [hasPermission]="['tournamentadministrator']"
                          class="btn btn-primary waves-light"
                          title="Переместить выше в списке"
                          (click)="moveArenaUp(teamItem)"
                          onAuthorizedPermission="show"
                          onUnauthorizedPermission="hide"
                          [disabled]="dataIsLoading || !teamItem || tournament.teams.length < 2 || tournament.teams?.indexOf(teamItem) == 0">
                    <i [class]="getMoveUpIconClass()"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-5">
          <div class="row" *ngIf="team">
            <div class="col-md-12 text-center">
              Проверить список добавленных игроков
            </div>
            <div class="col-md-12 text-center">
              {{team.name }}({{team.city? team.city.name: ''}})
            </div>
          </div>
          <div class="row" *ngIf="team">
            <div class="col-md-1">
              № п/п
            </div>
            <div class="col-md-4">
              ФИО игрока
            </div>
            <div class="col-md-3">
             Номер
            </div>
            <div class="col-md-4">
              Дата рождения
            </div>
          </div>
          <div class="row" *ngFor="let player of team?.players">
            <div class="col-md-1">
              {{team.players?.indexOf(player)+1}}
            </div>
            <div class="col-md-4">
              {{player.name}}
            </div>
            <div class="col-md-3">
              {{player.id}}
            </div>
            <div class="col-md-4">
              {{player.birthdate}}
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <span>Если Вашей команды нет в списке, необходимо <br/>добавить или убрать строку.<br/>Выставьте необходимое число команд на ШАГЕ 1</span>
        </div>
      </div>
    </div-->
      <div id="step-4" *ngIf="step == 4">
        step 4
      </div>
      <div id="step-5" *ngIf="step == 5">
        step 5
      </div>
      <div id="step-6" *ngIf="step == 6">
        step 6
      </div>
    <!--div class="form-group required">
      <label for="taname">Название анонса</label>
      <input type="text" class="form-control" name="tname" [(ngModel)]="ta.name" (ngModelChange)="ta.name = $event" #taname="ngModel" id="taname" title="Введите название анонса" required="required"/>
    </div>
    <div class="form-group required">
      <app-city-filter [city]="city" [isRequired]="true" (onChanged)="setCity($event)"></app-city-filter>
    </div>
    <div class="form-group required">
      <arena-select *ngIf="city" [cityId]="city.id" [arena]="arena" [isRequired]="true" (onChanged)="setArena($event)"></arena-select>
    </div>
    <div class="form-group">
      <label>Дата проведения, c</label>
      <app-datepicker [dt]="ta.startDate" (onChanged)="onChangedStartDt($event)"></app-datepicker>
    </div>
    <div class="form-group">
      <label>Дата проведения, до</label>
      <app-datepicker [dt]="ta.endDate" (onChanged)="onChangedEndDt($event)"></app-datepicker>
    </div>
    <div class="form-group">
      <label for="requiredResponseCount">Максимальное количество участников</label>
      <input type="number" min="0" max="2000" step="1" class="form-control" name="requiredResponseCount" [(ngModel)]="ta.requiredResponseCount" (ngModelChange)="ta.requiredResponseCount = $event" #requiredResponseCount="ngModel" ngModel number="true" id="requiredResponseCount"/>
    </div>
    <div class="form-group">
      <label for="ageGroup">Возрастная группа</label>
      <select class="form-group" [(ngModel)]="ta.ageGroup" name="ageGroup" class="form-control" #ageGroup="ngModel" id="ageGroup" (ngModelChange)="ta.ageGroup = $event">
        <option *ngFor="let ageType of ageTypes"  [ngValue]="ageType.value" >{{ageType.name}}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="ageGroup">Пол участников</label>
      <select class="form-group" [(ngModel)]="ta.gender" name="gender" class="form-control" #gender="ngModel" id="gender" (ngModelChange)="ta.gender = $event">
        <option *ngFor="let genderType of genderTypes"  [ngValue]="genderType.value" >{{genderType.name}}</option>
      </select>
    </div>
    <div class="form-group">
      <label for="isCommercial">Коммерческий?</label>
      <select class="form-group" [(ngModel)]="ta.isCommercial" name="isCommercial" class="form-control" #isCommercial="ngModel" id="isCommercial" (ngModelChange)="ta.isCommercial = $event">
        <option *ngFor="let isCommercialType of isCommercialTypes"  [ngValue]="isCommercialType.value" >{{isCommercialType.name}}</option>
      </select>
    </div>
    <div *ngIf="ta.isCommercial" class="form-group">
      <label for="costType">Тип оплаты</label>
      <select class="form-group" [(ngModel)]="ta.costType" name="costType" class="form-control" #costType="ngModel" id="costType" (ngModelChange)="ta.costType = $event">
        <option *ngFor="let costType of costTypes"  [ngValue]="costType.value" >{{costType.name}}</option>
      </select>
    </div>
    <div *ngIf="ta.isCommercial" class="form-group">
      <label for="cost">Стоимость участия</label>
      <input type="number" min="0" max="2000" step="1" class="form-control" name="cost" [(ngModel)]="ta.cost" (ngModelChange)="ta.cost = $event" #cost="ngModel" ngModel number="true" id="cost"/>
    </div>
    <div class="form-group">
      <label for="isCommercial">Закрытие турнира</label>
      <select class="form-group" [(ngModel)]="ta.closeCondition" name="closeCondition" class="form-control" #closeCondition="ngModel" id="closeCondition" (ngModelChange)="ta.closeCondition = $event">
        <option *ngFor="let closeType of closeTypes"  [ngValue]="closeType.value" >{{closeType.name}}</option>
      </select>
    </div>
    <div class="form-group">
      <label>Окончание регистрации</label>
      <app-datepicker [dt]="ta.endRegistrationDate" (onChanged)="onChangedEndRegDt($event)"></app-datepicker>
    </div>
    <div class="form-group required">
      <label for="content">Текст анонса</label>
      <app-ngx-editor [placeholder]="'Текст анонса'" [height]="200" class="form-control" name="content" [(ngModel)]="ta.content" (ngModelChange)="ta.content = $event" #content="ngModel" id="content" required="required"></app-ngx-editor>
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary"  [disabled]="dataIsLoading || myForm.invalid">Сохранить как черновик</button>
          <button class="btn btn-primary" (click)="viewList()" [disabled]="dataIsLoading">Отменить изменения и вернуться к списку</button>
      <img *ngIf="dataIsLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
    </div-->
    <span class="btn {{ ( step != 1  ) ? 'btn-primary' : 'grey disabled' }}" (click)="changeStep(step-1)" data-toggle="button" aria-pressed="false" data-placement="top" title="На предыдущий шаг">На предыдущий шаг</span>
    <span class="btn {{ ( step != 6  ) ? 'btn-primary' : 'grey disabled' }}" (click)="changeStep(step+1)" data-toggle="button" aria-pressed="false" data-placement="top" title="На следующий шаг">На следующий шаг</span>

  <!--/form-->
</div>
